webpackJsonp([14],{tWBr:function(e,t){},uiAw:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("07y0"),i={data:function(){return{loading:!0,tableData:[],pageSize:15,totalDataNumber:0,curPage:1,open_add:!1,open_edit:!1,userModel:{},searchForm:{name:"",level:0,province_id:"",city_id:""},areaList:[]}},created:function(){this.getData()},methods:{handleCurrentChange:function(e){this.curPage=e,this.loading=!0,this.getData()},handleSizeChange:function(e){this.curPage=1,this.pageSize=e,this.getData()},getData:function(){var e=this,t=e.searchForm;t.page=e.curPage,t.list_rows=e.pageSize,l.a.regionList(t,!0).then(function(t){e.loading=!1,e.tableData=t.data.list.data,e.totalDataNumber=t.data.list.total,e.areaList=t.data.regionData}).catch(function(e){})},onSubmit:function(){this.curPage=1,this.getData()},addClick:function(){this.$router.push("/region/add")},editClick:function(e){this.$router.push({path:"/region/edit",query:{id:e.id}})},initCity:function(){this.searchForm.city_id=""},deleteClick:function(e){var t=this;t.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.loading=!0,l.a.deleteRegion({id:e.id},!0).then(function(e){t.loading=!1,t.$message({message:e.msg,type:"success"}),t.getData()}).catch(function(e){t.loading=!1})}).catch(function(){})}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user"},[a("div",{staticClass:"common-form"},[e._v("地区列表")]),e._v(" "),a("div",{staticClass:"common-seach-wrap"},[a("el-form",{staticClass:"demo-form-inline",attrs:{size:"small",inline:!0,model:e.searchForm}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入名称"},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"地区类型"}},[a("div",[a("el-select",{model:{value:e.searchForm.level,callback:function(t){e.$set(e.searchForm,"level",t)},expression:"searchForm.level"}},[a("el-option",{attrs:{label:"全部",value:0}}),e._v(" "),a("el-option",{attrs:{label:"省份",value:1}}),e._v(" "),a("el-option",{attrs:{label:"城市",value:2}}),e._v(" "),a("el-option",{attrs:{label:"地区",value:3}})],1)],1)]),e._v(" "),a("el-form-item",{attrs:{label:"选择上级"}},[a("el-select",{attrs:{placeholder:"省"},on:{change:e.initCity},model:{value:e.searchForm.province_id,callback:function(t){e.$set(e.searchForm,"province_id",t)},expression:"searchForm.province_id"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.areaList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})],2),e._v(" "),""!=e.searchForm.province_id?a("el-select",{attrs:{placeholder:"市"},model:{value:e.searchForm.city_id,callback:function(t){e.$set(e.searchForm,"city_id",t)},expression:"searchForm.city_id"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.areaList[e.searchForm.province_id].city,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})],2):e._e()],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1)],1),e._v(" "),a("div",{staticClass:"common-level-rail"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.addClick}},[e._v("添加")])],1),e._v(" "),a("div",{staticClass:"product-content"},[a("div",{staticClass:"table-wrap"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{size:"small",data:e.tableData,border:""}},[a("el-table-column",{attrs:{prop:"shortname",label:"简称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"merger_name",label:"名称"}}),e._v(" "),a("el-table-column",{attrs:{label:"级别"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.level?a("span",[e._v("省份")]):e._e(),e._v(" "),2==t.row.level?a("span",[e._v("城市")]):e._e(),e._v(" "),3==t.row.level?a("span",[e._v("地区")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"lng",label:"经度"}}),e._v(" "),a("el-table-column",{attrs:{prop:"lat",label:"纬度"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.editClick(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.deleteClick(t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.curPage,"page-size":e.pageSize,layout:"total, prev, pager, next, jumper",total:e.totalDataNumber},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])])},staticRenderFns:[]};var r=a("VU/8")(i,n,!1,function(e){a("tWBr")},null,null);t.default=r.exports}});
//# sourceMappingURL=14.7db2307b45158dbbaf72.js.map