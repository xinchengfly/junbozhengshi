(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-plus-points-detail-detail"],{1215:function(t,i,e){var o=e("24fb");i=o(!1),i.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */\r\n/* start--主题色--start */\r\n/* end--主题色--end */.product-popup .popup-bg[data-v-27419dbe]{position:fixed;top:0;right:0;bottom:0;left:0;background:rgba(0,0,0,.6);z-index:99}.product-popup .main[data-v-27419dbe]{position:fixed;width:100%;bottom:0;min-height:%?200?%;background-color:#fff;-webkit-transform:translate3d(0,%?980?%,0);transform:translate3d(0,%?980?%,0);transition:-webkit-transform .2s cubic-bezier(0,0,.25,1);transition:transform .2s cubic-bezier(0,0,.25,1);transition:transform .2s cubic-bezier(0,0,.25,1),-webkit-transform .2s cubic-bezier(0,0,.25,1);border-radius:%?12?%;z-index:99}.product-popup.open .main[data-v-27419dbe]{-webkit-transform:translateZ(0);transform:translateZ(0);z-index:99}.product-popup.close .popup-bg[data-v-27419dbe]{display:none}.product-popup.close .main[data-v-27419dbe]{display:none;z-index:-1}.product-popup .header[data-v-27419dbe]{min-height:%?120?%;padding:%?40?% 0 %?40?% %?250?%;position:relative;border-bottom:1px solid #eee}.product-popup .header .avt[data-v-27419dbe]{position:absolute;top:%?40?%;left:%?30?%;width:%?200?%;height:%?200?%;border:2px solid #fff;background:#fff;border-radius:%?12?%}.product-popup .header .stock[data-v-27419dbe]{font-size:%?26?%;color:#999}.product-popup .close-btn[data-v-27419dbe]{position:absolute;width:%?40?%;height:%?40?%;top:%?40?%;right:%?30?%}.product-popup .price[data-v-27419dbe]{height:%?80?%;color:#f6220c;font-size:%?30?%}.product-popup .price .num[data-v-27419dbe]{padding:0 %?4?%;font-size:%?50?%}.product-popup .old-price[data-v-27419dbe]{margin-left:%?10?%;font-size:%?30?%;color:#999}.product-popup .body[data-v-27419dbe]{padding:%?20?% %?30?% %?39?% %?30?%;overflow-y:auto}.product-popup .level-box[data-v-27419dbe]{display:flex;justify-content:space-between;align-items:center}.product-popup .level-box .key[data-v-27419dbe]{font-size:%?24?%;color:#999}.product-popup .level-box .icon-box[data-v-27419dbe]{width:%?48?%;height:%?40?%;background:#e0e0e0}.product-popup .num-wrap .iconfont[data-v-27419dbe]{color:#666}.product-popup .num-wrap.no-stock .iconfont[data-v-27419dbe]{color:#ccc}.product-popup .level-box .text-wrap[data-v-27419dbe]{margin:0 %?4?%;height:%?60?%;border:none;background:#fff}.product-popup .level-box .text-wrap uni-input[data-v-27419dbe]{padding:0 %?10?%;height:%?60?%;line-height:%?60?%;width:%?80?%;text-align:center;font-size:%?32?%}.specs .specs-list[data-v-27419dbe]{display:flex;justify-content:flex-start;align-items:center;flex-wrap:wrap}.specs .specs-list uni-button[data-v-27419dbe]{margin-right:%?10?%;margin-bottom:%?10?%;font-size:%?24?%}.specs .specs-list uni-button[data-v-27419dbe]:after,\r\n.product-popup .btns uni-button[data-v-27419dbe],\r\n.product-popup .btns uni-button[data-v-27419dbe]:after{border:0;margin-bottom:%?55?%;border-radius:0}.product-popup .btns .confirm-btn[data-v-27419dbe]{width:%?710?%;height:%?80?%;background:linear-gradient(90deg,#ff6b6b 4%,#f6220c);border-radius:%?40?%;margin:0 auto;margin-bottom:%?55?%;background-color:#fff;color:#fff;line-height:%?80?%;font-size:%?32?%}.btn-checked[data-v-27419dbe]{border:1px solid #f6220c;border-radius:6px;color:#f6220c;font-size:%?26?%;background-color:#fff}.btn-checke[data-v-27419dbe]{border:%?1?% solid #d9d9d9;border-radius:%?6?%;font-size:%?26?%;color:#333;background-color:#fff}',""]),t.exports=i},"2a4f":function(t,i,e){"use strict";e.r(i);var o=e("b443"),s=e.n(o);for(var n in o)"default"!==n&&function(t){e.d(i,t,(function(){return o[t]}))}(n);i["default"]=s.a},"2c4c":function(t,i,e){"use strict";var o;e.d(i,"b",(function(){return s})),e.d(i,"c",(function(){return n})),e.d(i,"a",(function(){return o}));var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return t.loadding?t._e():e("v-uni-view",{staticClass:"product-detail"},[e("v-uni-view",{staticClass:"product-pic"},[e("v-uni-swiper",{staticClass:"swiper",attrs:{"indicator-dots":t.indicatorDots,autoplay:t.autoplay,interval:t.interval,duration:t.duration}},t._l(t.detail.product.image,(function(t,i){return e("v-uni-swiper-item",{key:i},[e("v-uni-image",{attrs:{src:t.file_path,mode:"aspectFit"}})],1)})),1)],1),e("v-uni-view",{staticClass:"bg-white"},[e("v-uni-view",{staticClass:"price-wrap"},[e("v-uni-view",{staticClass:"flex-1 d-s-s d-c"},[e("v-uni-view",{staticClass:"new-price"},[e("v-uni-text",{staticClass:"red f24"},[t._v("所需积分")]),e("v-uni-text",{staticClass:"red fb f50"},[t._v(t._s(t.detail.sku[0].point_num))]),t.detail.sku[0].point_money>0?[e("v-uni-text",{staticClass:"red f40 gray9"},[t._v("+")]),e("v-uni-text",{staticClass:"red"},[t._v("¥")]),e("v-uni-text",{staticClass:"num red fb f40"},[t._v(t._s(t.detail.sku[0].point_money))])]:t._e()],2),e("v-uni-text",{staticClass:"old-price"},[t._v("¥"+t._s(t.detail.product.line_price))])],1),e("v-uni-text",{staticClass:"already-sale"},[t._v("还剩余"+t._s(t.detail.stock)+"件")])],1),e("v-uni-view",{staticClass:"product-name"},[t._v(t._s(t.detail.product.product_name))]),e("v-uni-view",{staticClass:"product-describe"},[t._v(t._s(t.detail.product.selling_point))])],1),e("v-uni-view",{staticClass:"mt20"},[20==t.detail.spec_type?e("v-uni-view",{staticClass:"already-choice",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.openPopup("order")}}},[e("v-uni-view",{staticClass:"group-hd"},[e("v-uni-view",{staticClass:"left"},[e("v-uni-text",{staticClass:"min-name gray9"},[t._v("选择")])],1),e("v-uni-view",{staticClass:"flex-1 p-0-20 center-content f28 text-ellipsis o-h"},[t._v(t._s(t.alreadyChioce))]),e("v-uni-view",{staticClass:"right"},[e("v-uni-text",{staticClass:"icon iconfont icon-jiantou"})],1)],1)],1):t._e(),""!=t.detail.server?e("v-uni-view",{staticClass:"already-choice",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.showGuarantee.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"group-hd"},[e("v-uni-view",{staticClass:"left"},[e("v-uni-text",{staticClass:"min-name gray9"},[t._v("保障")])],1),e("v-uni-view",{staticClass:"flex-1 p-0-20 center-content f28 text-ellipsis o-h"},[t._v(t._s(t.serverList))]),e("v-uni-view",{staticClass:"right"},[e("v-uni-text",{staticClass:"icon iconfont icon-jiantou"})],1)],1)],1):t._e()],1),t.store_open?e("v-uni-view",{staticClass:"shop_head_info"},[e("v-uni-view",{staticClass:"shop_list_body_item_shop"},[e("v-uni-view",{staticClass:"shop_list_body_item_shop_logo"},[e("v-uni-image",{attrs:{src:t.shop_info.logos,mode:""}})],1),e("v-uni-view",{staticClass:"shop_list_body_item_shop_info"},[e("v-uni-view",{staticClass:"h1 title"},[t._v(t._s(t.shop_info.name))]),e("v-uni-view",{staticClass:"f26 brand"},[t._v("主营品牌： "+t._s(t.shop_info.category_name))]),e("v-uni-view",{staticClass:"f26 sales"},[t._v("销量："+t._s(t.shop_info.product_sales)+"件")])],1),e("v-uni-view",{staticClass:"shop_list_body_item_shop_others"},[e("v-uni-button",{attrs:{type:"default"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.goto_shop()}}},[t._v("进店看看")]),e("v-uni-view",{staticClass:"f26 collect"},[t._v("店铺评分："),e("v-uni-text",[t._v(t._s(t.shop_info.server_score))])],1)],1)],1)],1):t._e(),e("v-uni-view",{staticClass:"product-content"},[e("v-uni-view",{staticClass:"group-hd border-b-e"},[e("v-uni-view",{staticClass:"left"},[e("v-uni-text",{staticClass:"min-name"},[t._v("商品介绍")])],1)],1),e("v-uni-view",{staticClass:"content-box p30",domProps:{innerHTML:t._s(t.detail.product.content)}})],1),e("v-uni-view",{staticClass:"btns-wrap"},[e("v-uni-view",{staticClass:"customer-service d-c-c"},[e("v-uni-view",{staticClass:"icon-box",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.openMaservice.apply(void 0,arguments)}}},[e("v-uni-button",{staticClass:"d-c-c d-c"},[e("v-uni-text",{staticClass:"icon iconfont icon-kefu2 gray3",staticStyle:{height:"50rpx","line-height":"60rpx"}}),e("v-uni-text",{staticClass:"f22 gray3",staticStyle:{height:"50rpx","line-height":"40rpx"}},[t._v("客服")])],1)],1)],1),e("v-uni-button",{staticClass:"buy",attrs:{type:"primary"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.openPopup("order")}}},[t._v("立即抢购")])],1),e("spec",{attrs:{isPopup:t.isPopup,productModel:t.productModel},on:{close:function(i){arguments[0]=i=t.$handleEvent(i),t.closePopup.apply(void 0,arguments)}}}),t.isMpservice?e("Mpservice",{attrs:{isMpservice:t.isMpservice},on:{close:function(i){arguments[0]=i=t.$handleEvent(i),t.closeMpservice.apply(void 0,arguments)}}}):t._e(),e("guarantee",{attrs:{isguarantee:t.isguarantee,server:t.detail.server},on:{close:function(i){arguments[0]=i=t.$handleEvent(i),t.closeGuarantee.apply(void 0,arguments)}}})],1)},n=[]},"2eaf":function(t,i,e){"use strict";e("4d63"),e("ac1f"),e("25f0"),Object.defineProperty(i,"__esModule",{value:!0}),i.judgeSelect=void 0;var o=function(t,i,e,o){for(var n=0,a=t.length;n<a;n++)for(var r=0;r<t[n].spec_items.length;r++){var c=t[n].spec_items[r];n!=i&&(c.disabled=s(n,c.item_id,e,o))}};function s(t,i,e,o){for(var s=!1,n="",a=0;a<e.length;a++)a!=t?null!=e[a]?n+=e[a]+"_":n+="[0-9]*_":n+=i+"_";n=n.substr(0,n.length-1);for(var r=new RegExp(n,"g"),c=0;c<o.length;c++){var u=o[c].join("_");if(s=r.test(u),s)break}return!s}i.judgeSelect=o},"327d":function(t,i,e){"use strict";e.r(i);var o=e("bb37"),s=e("c355");for(var n in s)"default"!==n&&function(t){e.d(i,t,(function(){return s[t]}))}(n);e("815c");var a,r=e("f0c5"),c=Object(r["a"])(s["default"],o["b"],o["c"],!1,null,"27419dbe",null,!1,o["a"],a);i["default"]=c.exports},"815c":function(t,i,e){"use strict";var o=e("f056"),s=e.n(o);s.a},"97fb":function(t,i,e){var o=e("24fb");i=o(!1),i.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */\r\n/* start--主题色--start */\r\n/* end--主题色--end */.product-detail[data-v-598be090]{padding-bottom:%?90?%}.product-detail .product-pic[data-v-598be090],\r\n.product-detail .product-pic .swiper[data-v-598be090],\r\n.product-detail .product-pic uni-image[data-v-598be090]{width:%?750?%;height:%?750?%}.product-detail .price-wrap[data-v-598be090]{padding:%?20?% %?20?% 0;display:flex;justify-content:space-between;align-items:center}.product-detail .price-wrap .old-price[data-v-598be090]{padding:%?10?% 0;font-size:%?30?%;color:#888;text-decoration:line-through}.product-detail .already-sale[data-v-598be090]{font-size:%?24?%;color:#999}.product-detail .product-name[data-v-598be090]{padding:%?10?% %?20?% 0;font-size:%?36?%;font-weight:700;color:#333}.product-detail .product-describe[data-v-598be090]{padding:%?20?%;line-height:%?40?%;font-size:%?26?%;color:red}.product-comment[data-v-598be090],\r\n.product-content[data-v-598be090]{margin-top:%?20?%;background:#fff}.product-content .content-box p uni-image[data-v-598be090]{width:100%}.product-content .content-box[data-v-598be090]{font-size:%?36?%}.btns-wrap[data-v-598be090]{position:fixed;height:%?90?%;right:0;bottom:0;left:0;display:flex;background:#fff}.btns-wrap .icon-box[data-v-598be090]{width:%?90?%;height:%?90?%;border-right:1px solid #ddd}.btns-wrap .icon-box .iconfont[data-v-598be090]{font-size:%?40?%;color:#888}.btns-wrap .icon-box .iconfont .num[data-v-598be090]{position:absolute;padding:0 %?5?%;top:%?10?%;left:50%;height:%?30?%;line-height:%?30?%;border-radius:%?15?%;font-size:%?20?%;color:#fff;background:red}.btns-wrap uni-button[data-v-598be090],\r\n.btns-wrap uni-button[data-v-598be090]:after{height:%?91?%;line-height:%?90?%;margin:0;padding:0;flex:1;border-radius:0;border:0}.btns-wrap uni-button.add-cart[data-v-598be090]{background:#ffb000}.btns-wrap uni-button.buy[data-v-598be090]{background:#f6220c}.share-box[data-v-598be090]{position:fixed;padding-right:%?10?%;width:%?80?%;height:%?80?%;right:0;bottom:%?180?%;display:flex;justify-content:center;align-items:center;border-radius:%?16?% 0 0 %?16?%;background:rgba(0,0,0,.8)}.share-box uni-button[data-v-598be090]{padding:0;background:0;line-height:%?60?%}.share-box .iconfont[data-v-598be090]{margin-bottom:%?10?%;font-size:%?50?%;color:#fff}.create-img[data-v-598be090]{width:100%;padding:%?20?%;box-sizing:border-box}.create-img uni-image[data-v-598be090]{width:100%}.create-img uni-button[data-v-598be090]{width:100%}.already-choice[data-v-598be090]{margin-top:%?20?%;padding:0 %?30?%;background:#fff}.already-choice .center-content[data-v-598be090]{line-height:%?90?%}.shop_head_info[data-v-598be090]{width:100%;margin:0 auto;padding:5%;box-sizing:border-box;background-color:#fff}.shop_list_body_item_shop[data-v-598be090]{width:100%;height:%?120?%;display:flex;justify-content:space-between}.shop_list_body_item_shop_logo[data-v-598be090]{width:%?120?%;height:100%}.shop_list_body_item_shop_logo uni-image[data-v-598be090]{width:100%;height:100%;background-color:rgba(0,0,0,.1);border-radius:%?15?%}.shop_list_body_item_shop_info[data-v-598be090]{padding:%?10?%;box-sizing:border-box;margin-left:-10%;padding-top:0;display:flex;justify-content:space-between;flex-direction:column}.shop_list_body_item_shop_others[data-v-598be090]{padding:%?10?%;box-sizing:border-box;display:flex;justify-content:space-between;flex-direction:column;text-align:right;padding-top:0}.shop_list_body_item_shop_others uni-button[data-v-598be090]{width:%?140?%;height:%?60?%;line-height:%?60?%;padding:0;background-image:linear-gradient(90deg,#f11e0b,#f77737);color:#fff}',""]),t.exports=i},abc0:function(t,i,e){"use strict";var o=e("e912"),s=e.n(o);s.a},b443:function(t,i,e){"use strict";var o=e("4ea4");e("4160"),e("d81d"),e("a434"),e("a9e3"),e("ac1f"),e("5319"),e("1276"),e("159b"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=o(e("327d")),n=o(e("563b")),a=o(e("49ae")),r=o(e("9ad7")),c={components:{Spec:s.default,Mpservice:n.default,guarantee:r.default},data:function(){return{phoneHeight:0,scrollviewHigh:0,loadding:!0,indicatorDots:!0,autoplay:!0,interval:2e3,duration:500,point_product_id:null,imagList:[],alreadyChioce:"",detail:{product_sku:{},show_sku:{product_price:"",product_sku_id:0,line_price:"",stock_num:0,sku_image:""},show_point_sku:{}},isPopup:!1,specData:null,productModel:{},productSku:[],isMpservice:!1,serverList:"",isguarantee:!1,shop_info:{},store_open:1}},onLoad:function(t){this.point_product_id=t.point_product_id},mounted:function(){this.getData()},methods:{getData:function(){var t=this,i=t.point_product_id;uni.showLoading({title:"加载中"}),t._get("plus.points.product/detail",{point_product_id:i},(function(i){i.data.detail.product.content=a.default.format_content(i.data.detail.product.content),20==i.data.detail.product.spec_type&&t.initSpecData(i.data.detail.sku,i.data.specData),t.detail=i.data.detail,t.shop_info=i.data.detail.supplier,t.getServer(),t.loadding=!1,uni.hideLoading()}))},getServer:function(){var t=this,i=[];t.detail.server&&(t.detail.server.forEach((function(t,e){i.push(t.name)})),t.serverList=i.join("·"))},closeGuarantee:function(){this.isguarantee=!1},showGuarantee:function(){this.isguarantee=!0},initSpecData:function(t,i){for(var e=this,o=0;o<t.length;o++){var s=t[o];if(s.productSku){var n=s.productSku.spec_sku_id.split("_").map(Number);this.productSku.push(n)}}for(var a in i.spec_attr)for(var r=0;r<i.spec_attr[a].spec_items.length;r++){var c=i.spec_attr[a].spec_items[r];this.hasSpec(c.item_id,a)?(c.checked=!1,c.disabled=!1):(i.spec_attr[a].spec_items.splice(r,1),r--)}this.specData=i,this.specData.spec_attr&&(this.specData.spec_attr.forEach((function(t){e.alreadyChioce+=t.group_name,e.alreadyChioce+=" / "})),this.alreadyChioce=this.alreadyChioce.replace(/(\s\/\s)$/gi,""))},hasSpec:function(t,i){for(var e=!1,o=0;o<this.productSku.length;o++){var s=this.productSku[o];if(s[i]==t){e=!0;break}}return e},openPopup:function(t){var i={specData:this.specData,detail:this.detail,productSpecArr:null!=this.specData?new Array(this.specData.spec_attr.length):[],show_sku:{sku_image:"",seckill_price:0,product_sku_id:0,line_price:0,seckill_stock:0,seckill_product_sku_id:0,sum:1},productSku:this.productSku,type:t};this.productModel=i,this.isPopup=!0},closePopup:function(t,i){if(this.isPopup=!1,console.log(t),t&&t.spec_attr){this.alreadyChioce="";var e="已选：",o="";t.spec_attr.forEach((function(t){if(t.spec_items){for(var i="",s=0;s<t.spec_items.length;s++){var n=t.spec_items[s];if(n.checked){i=n.spec_value+" / ";break}}""!=i?e+=i:o+=t.group_name}})),""!=o?this.alreadyChioce=o:(e=e.replace(/(\s\/\s)$/gi,""),this.alreadyChioce=e)}i&&(this.cart_total_num=i)},openMaservice:function(){this.isMpservice=!0},closeMpservice:function(){this.isMpservice=!1},goto_shop:function(){var t=this;t.gotoPage("/pages/shop/shop?shop_supplier_id="+t.detail.supplier.shop_supplier_id)}}};i.default=c},bb37:function(t,i,e){"use strict";var o;e.d(i,"b",(function(){return s})),e.d(i,"c",(function(){return n})),e.d(i,"a",(function(){return o}));var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{class:t.Visible?"product-popup open":"product-popup close",on:{touchmove:function(i){i.stopPropagation(),i.preventDefault(),arguments[0]=i=t.$handleEvent(i)},click:function(i){arguments[0]=i=t.$handleEvent(i),t.closePopup.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"popup-bg"}),e("v-uni-view",{staticClass:"main",on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i)}}},[e("v-uni-view",{staticClass:"header"},[e("v-uni-image",{staticClass:"avt",attrs:{src:t.form.show_sku.sku_image,mode:"aspectFit"}}),e("v-uni-view",{staticClass:"price d-s-c"},[e("v-uni-text",{staticClass:"f24"},[t._v("所需积分")]),e("v-uni-text",{staticClass:"num fb f34"},[t._v(t._s(t.form.show_sku.point_num))]),e("v-uni-text",[t._v("+")]),e("v-uni-text",{staticClass:"old-price"},[t._v("¥"+t._s(t.form.show_sku.point_money))])],1),e("v-uni-view",{staticClass:"stock"},[t._v("库存："+t._s(t.form.show_sku.point_stock))]),e("v-uni-view",{staticClass:"p-20-0 select_spec"},[t._v(t._s(t.selectSpec))]),e("v-uni-view",{staticClass:"close-btn",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.closePopup.apply(void 0,arguments)}}},[e("v-uni-text",{staticClass:"icon iconfont icon-jiantoushang"})],1)],1),e("v-uni-view",{staticClass:"body"},[e("v-uni-view",[null!=t.form.specData?e("v-uni-scroll-view",{staticClass:"specs mt20",staticStyle:{"max-height":"600rpx"},attrs:{"scroll-y":"true"}},t._l(t.form.specData.spec_attr,(function(i,o){return e("v-uni-view",{key:o,staticClass:"specs mt20"},[e("v-uni-view",{staticClass:"specs-hd p-20-0"},[e("v-uni-text",{staticClass:"f24 gray9"},[t._v(t._s(i.group_name))]),null==t.form.productSpecArr[o]?e("v-uni-text",{staticClass:"ml10 red"},[t._v("请选择"+t._s(i.group_name))]):t._e()],1),e("v-uni-view",{staticClass:"specs-list"},t._l(i.spec_items,(function(i,s){return e("v-uni-button",{key:s,class:i.checked?"btn-checked":"btn-checke",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.selectAttr(o,s)}}},[t._v(t._s(i.spec_value))])})),1)],1)})),1):t._e()],1),e("v-uni-view",{staticClass:"level-box count_choose"},[e("v-uni-text",{staticClass:"key"},[t._v("数量")]),e("v-uni-view",{staticClass:"d-s-c"},[e("v-uni-view",{staticClass:"icon-box minus d-c-c",class:{"num-wrap":!t.issub},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.sub()}}},[e("v-uni-text",{staticClass:"icon iconfont icon-jian",staticStyle:{"font-size":"20rpx",color:"#333333"}})],1),e("v-uni-view",{staticClass:"text-wrap"},[e("v-uni-input",{attrs:{type:"text",value:""},model:{value:t.form.show_sku.sum,callback:function(i){t.$set(t.form.show_sku,"sum",i)},expression:"form.show_sku.sum"}})],1),e("v-uni-view",{staticClass:"icon-box plus d-c-c",class:{"num-wrap":!t.isadd},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.add()}}},[e("v-uni-text",{staticClass:"icon iconfont icon-jia",staticStyle:{"font-size":"20rpx",color:"#333333"}})],1)],1)],1)],1),e("v-uni-view",{staticClass:"btns white"},[e("v-uni-button",{staticClass:"confirm-btn",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.confirmFunc(t.form)}}},[t._v("确认")])],1)],1)],1)},n=[]},c355:function(t,i,e){"use strict";e.r(i);var o=e("dfc0"),s=e.n(o);for(var n in o)"default"!==n&&function(t){e.d(i,t,(function(){return o[t]}))}(n);i["default"]=s.a},dfc0:function(t,i,e){"use strict";e("7db0"),e("4160"),e("159b"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=e("2eaf"),s={data:function(){return{Visible:!1,form:{detail:{product_sku:{},show_sku:{},show_point_sku:{point_price:0}},show_sku:{sum:1}},stock:0,selectSpec:"",isAll:!1,is_change:!1}},props:["isPopup","productModel"],onLoad:function(){},mounted:function(){},computed:{isadd:function(){return this.form.show_sku.sum>=this.stock||this.form.show_sku.sum>=this.form.detail.limit_num},issub:function(){return this.form.show_sku.sum<=1}},watch:{isPopup:function(t,i){var e=this;t!=i&&(this.Visible=t,this.isOpenSpec||(this.form=this.productModel,this.isOpenSpec=!0,this.initShowSku(),this.form.specData.spec_attr.forEach((function(t,i){e.selectAttr(i,0)}))),this.form.type=this.productModel.type,console.log(this.productModel))},"form.specData":{handler:function(t,i){var e=this,o="",s="";if(this.isAll=!0,t){for(var n=function(i){null==e.form.productSpecArr[i]?(e.isAll=!1,o+=t.spec_attr[i].group_name+" "):t.spec_attr[i].spec_items.forEach((function(t){e.form.productSpecArr[i]==t.item_id&&(s+='"'+t.spec_value+'" ')}))},a=0;a<t.spec_attr.length;a++)n(a);this.isAll?s="已选: "+s:o="请选择: "+o}this.selectSpec=this.isAll?s:o},deep:!0,immediate:!0}},methods:{closePopup:function(){this.$emit("close",this.form.specData,null)},confirmFunc:function(){null==this.form.specData||this.isAll?this.createdOrder():uni.showToast({title:"请选择规格",icon:"none",duration:2e3})},initShowSku:function(){this.form.show_sku.sku_image=this.form.detail.product.image[0].file_path,this.form.show_sku.point_price=this.form.detail.point_price,this.form.show_sku.product_sku_id=0,this.form.show_sku.line_price=this.form.detail.line_price,this.form.show_sku.point_stock=this.form.detail.stock,this.form.show_sku.point_product_sku_id=0,this.form.show_sku.point_num=this.form.detail.sku[0].point_num,this.form.show_sku.point_money=this.form.detail.sku[0].point_money,this.form.show_sku.product_sku_id=0,this.stock=this.form.detail.stock},selectAttr:function(t,i){var e=this,s=e.form.specData.spec_attr[t].spec_items,n=s[i];if(n.checked)n.checked=!1,e.form.productSpecArr[t]=null;else{for(var a=0;a<s.length;a++)s[a].checked=!1;n.checked=!0,e.form.productSpecArr[t]=n.item_id}(0,o.judgeSelect)(e.form.specData.spec_attr,t,e.form.productSpecArr,e.form.productSku);for(var r=!0,c=0;c<e.form.productSpecArr.length;c++){var u=e.form.productSpecArr[c];if(null==u)return r=!1,void e.initShowSku()}r?e.updateSpecProduct():e.initShowSku()},updateSpecProduct:function(){var t=this,i=t.form.productSpecArr.join("_"),e=t.form.specData.spec_list,o=e.find((function(t){return t.spec_sku_id==i}));if("object"===typeof o){var s=t.form.detail.sku,n=s.find((function(t){return t.product_sku_id==o.product_sku_id}));console.log(n),t.stock=n.point_stock,t.form.show_sku.sum>t.stock&&(t.form.show_sku.sum=t.stock>0?t.stock:1),t.form.show_sku.line_price=o.spec_form.product_price,t.form.show_sku.product_sku_id=o.spec_sku_id,t.form.show_sku.point_price=n.point_price,t.form.show_sku.point_product_sku_id=n.point_product_sku_id,t.form.show_sku.point_stock=n.point_stock,o.spec_form.image_id>0?t.form.show_sku.sku_image=o.spec_form.image_path:t.form.show_sku.sku_image=t.form.detail.product.image[0].file_path}},createdOrder:function(){var t=this,i=t.form.detail.point_product_id,e=t.form.show_sku.sum,o=t.form.show_sku.product_sku_id,s=t.form.show_sku.point_product_sku_id;t.gotoPage("/pages/order/confirm-order?product_num="+e+"&point_product_id="+i+"&product_sku_id="+o+"&point_product_sku_id="+s+"&order_type=points")},add:function(){if(!(this.stock<=0))return this.form.show_sku.sum>=this.stock?(uni.showToast({title:"数量超过了库存",icon:"none",duration:2e3}),!1):this.form.show_sku.sum>=this.form.detail.limit_num?(uni.showToast({title:"数量超过了限购数量",icon:"none",duration:2e3}),!1):void this.form.show_sku.sum++},sub:function(){if(!(this.stock<=0))return this.form.show_sku.sum<2?(uni.showToast({title:"商品数量至少为1",icon:"none",duration:2e3}),!1):void this.form.show_sku.sum--}}};i.default=s},e912:function(t,i,e){var o=e("97fb");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var s=e("4f06").default;s("82607d24",o,!0,{sourceMap:!1,shadowMode:!1})},f056:function(t,i,e){var o=e("1215");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var s=e("4f06").default;s("23b64618",o,!0,{sourceMap:!1,shadowMode:!1})},f164:function(t,i,e){"use strict";e.r(i);var o=e("2c4c"),s=e("2a4f");for(var n in s)"default"!==n&&function(t){e.d(i,t,(function(){return s[t]}))}(n);e("abc0");var a,r=e("f0c5"),c=Object(r["a"])(s["default"],o["b"],o["c"],!1,null,"598be090",null,!1,o["a"],a);i["default"]=c.exports}}]);