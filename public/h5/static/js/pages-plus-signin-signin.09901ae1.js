(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-plus-signin-signin"],{"3a78":function(t,i,n){"use strict";n.r(i);var a=n("8024"),e=n("7f04");for(var s in e)"default"!==s&&function(t){n.d(i,t,(function(){return e[t]}))}(s);n("7862");var o,r=n("f0c5"),d=Object(r["a"])(e["default"],a["b"],a["c"],!1,null,"6da65611",null,!1,a["a"],o);i["default"]=d.exports},7862:function(t,i,n){"use strict";var a=n("a730"),e=n.n(a);e.a},"7f04":function(t,i,n){"use strict";n.r(i);var a=n("e9c3"),e=n.n(a);for(var s in a)"default"!==s&&function(t){n.d(i,t,(function(){return a[t]}))}(s);i["default"]=e.a},8024:function(t,i,n){"use strict";var a;n.d(i,"b",(function(){return e})),n.d(i,"c",(function(){return s})),n.d(i,"a",(function(){return a}));var e=function(){var t=this,i=t.$createElement,n=t._self._c||i;return t.loading?t._e():n("v-uni-view",{staticClass:"signin-container"},[n("v-uni-view",{staticClass:"sigin-title d-c-c"},[n("v-uni-text",[t._v("签到有礼")])],1),n("v-uni-view",{staticClass:"sign-main"},[n("v-uni-view",{staticClass:"sign-main-bg"},[n("v-uni-view",{staticClass:"sign-head f28"},[t.reward.length>0&&t.reward[0]>=1?n("v-uni-view",{staticClass:"small"},[t._v("(再签到"),n("v-uni-text",{staticClass:"p-0-10 yellow fb"},[t._v(t._s(t.reward[0]))]),t._v("天可得到"),n("v-uni-text",{staticClass:"p-0-10 yellow fb"},[t._v(t._s(t.point[t.reward[0]]))]),t._v("积分)")],1):t._e(),t.reward.length>0&&1==t.reward[0]&&!t.is_sign?n("v-uni-view",{staticClass:"small"},[t._v("(今天签到即可得到额外奖励)")]):t._e()],1),n("v-uni-view",{staticClass:"sign-calendar-wrap"},[n("v-uni-view",{staticClass:"date-text"},[t._v(t._s(t.today_year)+"年"+t._s(t.today_month)+"月")]),n("v-uni-view",{staticClass:"week-list"},t._l(t.weeklist,(function(i,a){return n("v-uni-view",{key:a,staticClass:"week-item"},[t._v(t._s(i))])})),1),n("v-uni-view",{staticClass:"date-list-wrap"},t._l(t.daylist,(function(i,a){return n("v-uni-view",{key:a,staticClass:"date-item",class:0!=i.type?"secondary-date-item":""},[t.list.indexOf(i.day)>-1&&0==i.type?n("v-uni-text",{staticClass:"icon-box"},[t._v(t._s(i.day))]):t._e(),[t.reward.indexOf(i.day-t.today)>-1&&0==i.type&&-1==t.list.indexOf(i.day)?n("v-uni-text",{staticClass:"iconfont icon-libao"}):t._e(),-1==t.list.indexOf(i.day)&&0==i.type&&-1==t.reward.indexOf(i.day-t.today)?n("v-uni-view",[n("v-uni-text",[t._v(t._s(i.day))])],1):t._e()]],2)})),1)],1)],1),n("v-uni-view",{staticClass:"pt30 d-c-c f34 white"},[t._v("你已经累计签到"),n("v-uni-text",{staticClass:"p-0-10 yellow fb"},[t._v(t._s(t.days))]),t._v("天")],1),n("v-uni-view",{staticClass:"btns"},[t.is_sign?n("v-uni-view",{staticClass:"d-c-c yellow f40 fb"},[n("v-uni-text",{staticClass:"iconfont icon-queren mr10"}),t._v("今日已签到")],1):n("v-uni-button",{attrs:{type:"primary"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onSign.apply(void 0,arguments)}}},[t._v("立即签到")])],1)],1),n("v-uni-view",{staticClass:"rule-btn",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.gotoRuleFunc.apply(void 0,arguments)}}},[t._v("活动规则")])],1)},s=[]},a730:function(t,i,n){var a=n("d032");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var e=n("4f06").default;e("d91ed722",a,!0,{sourceMap:!1,shadowMode:!1})},d032:function(t,i,n){var a=n("24fb");i=a(!1),i.push([t.i,".signin-container[data-v-6da65611]{position:fixed;top:var(--window-top);right:0;bottom:0;left:0;overflow-y:auto;background:#e2231a}.signin-container .sigin-title[data-v-6da65611]{padding-top:%?40?%;height:%?200?%;color:#ffe19f}.signin-container .sigin-title uni-text[data-v-6da65611]{font-size:%?80?%;font-weight:700}.signin-container .sign-bg[data-v-6da65611]{position:absolute;top:0;left:0;right:0;width:100%;z-index:1}.signin-container .sign-main[data-v-6da65611]{margin:%?45?%}.signin-container .sign-main-bg[data-v-6da65611]{background:#ff5649;border-radius:%?20?%;box-shadow:0 %?10?% %?16?% 0 rgba(0,0,0,.2)}.signin-container .sign-main .sign-head[data-v-6da65611]{padding:%?20?%;display:flex;justify-content:center;align-items:center;flex-direction:column;color:#fff}.signin-container .sign-main .sign-head .big[data-v-6da65611]{font-size:%?30?%}.signin-container .sign-calendar-wrap[data-v-6da65611]{width:100%;border-radius:%?20?%;background:hsla(0,0%,100%,.9);box-shadow:0 %?-4?% %?8?% 0 rgba(0,0,0,.1)}.sign-calendar-wrap .date-text[data-v-6da65611]{height:%?80?%;line-height:%?80?%;text-align:center;color:#e2231a;font-size:%?30?%}.sign-calendar-wrap .week-list[data-v-6da65611]{display:flex;justify-content:flex-start}.sign-calendar-wrap .week-list .week-item[data-v-6da65611]{width:%?94?%;height:%?80?%;display:flex;justify-content:center;align-items:center;color:#999;font-size:%?28?%;font-weight:700}.sign-calendar-wrap .date-list-wrap[data-v-6da65611]{display:flex;justify-content:flex-start;flex-wrap:wrap}.sign-calendar-wrap .date-list-wrap .date-item[data-v-6da65611]{width:%?94?%;height:%?80?%;display:flex;justify-content:center;align-items:center;font-size:%?28?%;font-weight:700}.sign-calendar-wrap .date-list-wrap .date-item .icon-box[data-v-6da65611]{width:%?60?%;height:%?60?%;border-radius:50%;background:#ff5850;color:#fff}.sign-calendar-wrap .date-list-wrap .date-item uni-image[data-v-6da65611]{width:%?60?%;height:%?60?%}.sign-calendar-wrap .date-list-wrap .date-item .iconfont[data-v-6da65611]{color:#ff5850;font-size:%?50?%;font-weight:100}.sign-calendar-wrap .date-list-wrap .secondary-date-item[data-v-6da65611]{color:#efe3c8}.sign-main .btns[data-v-6da65611]{margin-top:%?40?%;padding:0 %?20?% %?40?%}.sign-main .btns uni-button[data-v-6da65611]{height:%?100?%;line-height:%?100?%;text-shadow:0 0 %?8?% 0 rgba(0,0,0,.3);border-radius:%?50?%;font-size:%?36?%;background:linear-gradient(0deg,#ff4239,#ff5850,#ff6a63);box-shadow:0 %?10?% %?20?% 0 rgba(0,0,0,.1);color:#ffe4e2}.rule-btn[data-v-6da65611]{position:fixed;top:calc(var(--window-top) + %?30?%);padding:0 %?20?% 0 %?30?%;height:%?80?%;line-height:%?80?%;font-size:%?30?%;background:linear-gradient(90deg,#ff5850,#e2231a);box-shadow:0 %?10?% %?16?% 0 rgba(0,0,0,.2);border-radius:%?40?% 0 0 %?40?%;color:#fff;right:0;z-index:1}.signin-container .btns .iconfont[data-v-6da65611]{font-size:%?40?%;color:#ff0}",""]),t.exports=i},e9c3:function(t,i,n){"use strict";n("99af"),n("a630"),n("c975"),n("fb6a"),n("3ca3"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a={data:function(){return{loading:!0,weeklist:["日","一","二","三","四","五","六"],daylist:[],year:null,today_year:null,month:null,today_month:null,day:null,today_day:null,list:[],reward:[],days:0,today:0,is_sign:!1,point:[]}},onShow:function(){this.init(),this.getData()},methods:{getData:function(){var t=this;uni.showLoading({title:"加载中"}),t._get("plus.sign.sign/index",{},(function(i){t.list=i.data.list[0],t.days=i.data.list[1],t.today=i.data.list[2],t.reward=i.data.arr,t.point=i.data.point,t.list.indexOf(t.day)>=0&&(t.is_sign=!0),t.loading=!1,uni.hideLoading()}))},onSign:function(){var t=this;if(t.is_sign)return uni.showToast({title:"今天已签到",duration:2e3}),!1;uni.showLoading({title:"正在提交",mask:!0}),t._get("plus.sign.sign/add",{},(function(i){uni.hideLoading(),t.showSuccess(i.data.msg,(function(){t.getData()}))}))},init:function(){if(null===this.year&&null===this.month&&null===this.day){var t=new Date;this.year=t.getFullYear(),this.today_year=t.getFullYear(),this.month=t.getMonth(),this.today_month=t.getMonth()+1,this.day=t.getDate(),this.today_day=t.getDate()}this.joinDay()},joinDay:function(){var t=[],i=this.getMonthCount(this.year,this.month),n=this.getPreMonthCount(this.year,this.month),a=this.getNextMonthCount(this.year,this.month),e=this.getWeekday(this.year,this.month),s=[];0!=e&&(s=n.slice(-1*e));var o=a.slice(0,42-i.length-e),r=this.numConvertNode(s,"pre"),d=this.numConvertNode(i,null),l=this.numConvertNode(o,"next");t=[].concat(r,d,l),this.daylist=t},numConvertNode:function(t,i){var n=0,a=[],e=t.length;null!=i&&("pre"==i?n=-1:(n=1,e>7&&(e-=7)));for(var s=0;s<e;s++){var o={type:n,day:t[s]};a.push(o)}return a},isLeapYear:function(t){return t%400===0||t%100!==0&&t%4===0},getMonthCount:function(t,i){var n=[31,null,31,30,31,30,31,31,30,31,30,31],a=n[i]||(this.isLeapYear(t)?29:28);return Array.from(new Array(a),(function(t,i){return i+1}))},getWeekday:function(t,i){var n=new Date(t,i,1);return n.getDay()},getPreMonthCount:function(t,i){return 0===i?this.getMonthCount(t-1,11):this.getMonthCount(t,i-1)},getNextMonthCount:function(t,i){return 11===i?this.getMonthCount(t+1,0):this.getMonthCount(t,i+1)},gotoRuleFunc:function(){this.gotoPage("/pages/plus/signin/rule/rule")}}};i.default=a}}]);