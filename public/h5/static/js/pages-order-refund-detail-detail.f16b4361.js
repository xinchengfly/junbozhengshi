(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-order-refund-detail-detail"],{"26b3":function(e,t,s){"use strict";s.r(t);var i=s("d970"),a=s("a0f2");for(var n in a)"default"!==n&&function(e){s.d(t,e,(function(){return a[e]}))}(n);s("ae5e");var d,r=s("f0c5"),u=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,"458ca668",null,!1,i["a"],d);t["default"]=u.exports},"5f34":function(e,t,s){var i=s("24fb");t=i(!1),t.push([e.i,".order-refund-detail .btn-red[data-v-458ca668]{height:%?88?%;line-height:%?88?%;border-radius:%?44?%;box-shadow:0 %?8?% %?16?% 0 rgba(226,35,26,.6)}.table-item[data-v-458ca668]{display:flex;align-items:center;justify-content:center;background-color:#fff;border-radius:%?8?%;padding:%?26?%;box-sizing:border-box}.selectpicker[data-v-458ca668]{width:%?400?%;height:%?65?%;line-height:%?65?%;padding:0 %?23?%;box-sizing:border-box;border:%?2?% solid #bfbfbf;border-radius:%?5?%;font-size:%?26?%;font-weight:500;color:#575757;display:flex;justify-content:space-between;align-items:center}.selectpicker .jiantou[data-v-458ca668]{color:#575757;font-size:%?22?%}.send_btn[data-v-458ca668]{width:%?200?%;margin:0 auto}.w120[data-v-458ca668]{width:%?120?%}",""]),e.exports=t},"77ed":function(e,t,s){var i=s("5f34");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var a=s("4f06").default;a("120011e7",i,!0,{sourceMap:!1,shadowMode:!1})},a0f2:function(e,t,s){"use strict";s.r(t);var i=s("b570"),a=s.n(i);for(var n in i)"default"!==n&&function(e){s.d(t,e,(function(){return i[e]}))}(n);t["default"]=a.a},ae5e:function(e,t,s){"use strict";var i=s("77ed"),a=s.n(i);a.a},b570:function(e,t,s){"use strict";var i=s("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(s("ade3")),n={data:function(){return{loadding:!0,indicatorDots:!0,autoplay:!0,interval:2e3,duration:500,expressList:{},index:-1,order_refund_id:0,detail:{address:{}},express_id:0,temlIds:[],source:"user",refuse_desc:"",refund_money:"",is_agree:10,address:[],addressIndex:0,address_id:""}},onLoad:function(e){this.order_refund_id=e.order_refund_id,this.source=e.source||"user"},mounted:function(){this.getData()},methods:{getData:function(){var e=this;e.loadding=!0,uni.showLoading({title:"加载中"});var t=e.order_refund_id;e._get("user.refund/detail",{order_refund_id:t,platform:e.getPlatform()},(function(t){e.loadding=!1,uni.hideLoading(),e.address=t.data.address,e.detail=t.data.detail,e.expressList=t.data.expressList,e.temlIds=t.data.template_arr}))},onExpressChange:function(e){this.index=e.target.value,this.express_id=this.expressList[this.index].express_id},onAddressChange:function(e){this.addressIndex=e.target.value,this.address_id=this.address[this.addressIndex].address_id,console.log(this.address_id)},formSubmit:function(e){var t=this,s=e.detail.value;s.order_refund_id=t.order_refund_id,s.express_id=t.express_id;var i=function(){uni.showLoading({title:"正在提交",mask:!0}),t._post("user.refund/delivery",s,(function(e){uni.hideLoading(),uni.showToast({title:e.msg,duration:3e3,complete:function(){t.gotoPage("/pages/order/refund/detail/detail?order_refund_id="+t.order_refund_id)}})}))};t.subMessage(t.temlIds,i)},sendRefund:function(){var e,t=this;if(!t.loadding)if(t.loadding=!0,t.refund_money>t.detail.orderproduct.total_pay_price)t.showError("退款金额超过最大值");else if(10!=t.is_agree||""!=t.address_id||30==t.detail.type.value){var s=t.order_refund_id;uni.showLoading({title:"提交中..."}),t._post("user.refund/audit",(e={order_refund_id:s,is_agree:t.is_agree,refuse_desc:t.refuse_desc},(0,a.default)(e,"order_refund_id",s),(0,a.default)(e,"refund_money",t.refund_money),(0,a.default)(e,"address_id",t.address_id),e),(function(e){t.loadding=!1,uni.hideLoading(),t.getData(),t.showSuccess("操作成功")}),(function(e){t.loadding=!1}))}else t.showError("请选择退货地址")},reReceipt:function(e){var t=this;if(!t.loadding){var s=e.detail.value;s.order_refund_id=t.order_refund_id,s.send_express_id=t.express_id,s.refund_money=0,t.loadding=!0;t.order_refund_id;uni.showLoading({title:"提交中..."}),t._post("user.refund/receipt",s,(function(e){t.loadding=!1,uni.hideLoading(),t.getData(),t.showSuccess("操作成功")}),(function(e){t.loadding=!1}))}},sendReceipt:function(){var e=this;if(!e.loadding)if(e.loadding=!0,e.refund_money>e.detail.orderproduct.total_pay_price)e.showError("退款金额超过最大值");else{var t=e.order_refund_id;uni.showLoading({title:"提交中..."}),e._post("user.refund/receipt",{order_refund_id:t,refund_money:e.refund_money},(function(t){e.loadding=!1,uni.hideLoading(),e.getData(),e.showSuccess("操作成功")}),(function(t){e.loadding=!1}))}},changeRadio:function(e){this.is_agree=e.detail.value}}};t.default=n},d970:function(e,t,s){"use strict";var i;s.d(t,"b",(function(){return a})),s.d(t,"c",(function(){return n})),s.d(t,"a",(function(){return i}));var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.loadding?e._e():s("v-uni-view",{staticClass:"order-refund-detail pb100"},[s("v-uni-view",{staticClass:"order-state d-s-c"},[s("v-uni-view",{staticClass:"icon-box"},[s("span",{staticClass:"icon iconfont icon-gantanhao"})]),s("v-uni-view",{staticClass:"state-cont flex-1"},[s("v-uni-view",{staticClass:"state-txt d-b-c"},[s("v-uni-text",{staticClass:"desc f34"},[e._v(e._s(e.detail.state_text))])],1)],1),s("v-uni-view",{staticClass:"dot-bg"})],1),s("v-uni-view",{staticClass:"p30 mt20 bg-white"},[s("v-uni-view",{staticClass:"one-product border-b-e d-s-c pb20"},[s("v-uni-view",{staticClass:"cover"},[s("v-uni-image",{attrs:{src:e.detail.orderproduct.image.file_path,mode:"aspectFit"}})],1),s("v-uni-view",{staticClass:"flex-1"},[s("v-uni-view",{staticClass:"pro-info"},[e._v(e._s(e.detail.orderproduct.product_name))]),s("v-uni-view",{staticClass:"pt10 p-0-30"},[s("v-uni-text",{staticClass:"f24 gray9"},[e._v(e._s(e.detail.orderproduct.product_attr))])],1)],1)],1),s("v-uni-view",{staticClass:"d-e-c pt20 lh150"},[s("v-uni-view",{staticClass:"f24"},[e._v("商品金额："),s("v-uni-text",{staticClass:"red"},[e._v("¥"+e._s(e.detail.orderproduct.total_price))])],1)],1),s("v-uni-view",{staticClass:"d-e-c pt10 lh150"},[s("v-uni-view",{staticClass:"f24"},[e._v("订单实付金额："),s("v-uni-text",{staticClass:"red"},[e._v("¥"+e._s(e.detail.orderproduct.total_pay_price))])],1)],1)],1),20==e.detail.status.value?s("v-uni-view",{staticClass:"group bg-white"},[s("v-uni-text",{staticClass:"gray9"},[e._v("已退款金额：")]),s("v-uni-text",{staticClass:"gray9"},[e._v("￥"+e._s(e.detail.refund_money))])],1):e._e(),s("v-uni-view",{staticClass:"group bg-white f24"},[s("v-uni-view",{staticClass:"p-20-0 border-b f34"},[e._v("申请退货信息")]),s("v-uni-view",{staticClass:"p-20-0 f28"},[s("v-uni-text",{staticClass:"gray9"},[e._v("售后类型：")]),s("v-uni-text",[e._v(e._s(e.detail.type.text))])],1),s("v-uni-view",{staticClass:"p-20-0 f28"},[s("v-uni-text",{staticClass:"gray9"},[e._v("申请原因：")]),s("v-uni-text",[e._v(e._s(e.detail.apply_desc))])],1),s("v-uni-view",{staticClass:"p-20-0 upload-list d-s-s f28"},[s("v-uni-text",{staticClass:"gray9"},[e._v("申请凭证：")]),s("v-uni-view",{staticClass:"d-s-s f-w"},[e.detail.image.length>0?e._l(e.detail.image,(function(e,t){return s("v-uni-view",{key:t,staticClass:"item"},[s("v-uni-image",{attrs:{src:e.file_path,mode:"aspectFit"}})],1)})):[e._v("无")]],2)],1)],1),0!=e.detail.plate_status.value?s("v-uni-view",{staticClass:"group bg-white"},[s("v-uni-view",{staticClass:"p-20-0 border-b f34"},[e._v("平台处理结果:")]),s("v-uni-view",{staticClass:"p-20-0"},[10==e.detail.plate_status.value?s("v-uni-text",{staticClass:"red f28"},[e._v("客服处理中")]):e._e(),20==e.detail.plate_status.value?s("v-uni-text",{staticClass:"red f28"},[e._v("平台已同意退款")]):e._e(),30==e.detail.plate_status.value?s("v-uni-text",{staticClass:"red f28"},[e._v("平台已拒绝退款")]):e._e()],1)],1):e._e(),10==e.detail.status.value?s("v-uni-view",{staticClass:"group bg-white"},[s("v-uni-view",{staticClass:"p-20-0 border-b f34"},[e._v("商家拒绝原因")]),s("v-uni-view",{staticClass:"p-20-0"},[s("v-uni-text",{staticClass:"red f28"},[e._v(e._s(e.detail.refuse_desc))])],1)],1):e._e(),30==e.detail.plate_status.value?s("v-uni-view",{staticClass:"group bg-white"},[s("v-uni-view",{staticClass:"p-20-0 border-b f34"},[e._v("平台拒绝原因")]),s("v-uni-view",{staticClass:"p-20-0"},[s("v-uni-text",{staticClass:"red f28"},[e._v(e._s(e.detail.plate_desc))])],1)],1):e._e(),10==e.detail.is_agree.value&&30!=e.detail.type.value?s("v-uni-view",{staticClass:"group bg-white"},[s("v-uni-view",{staticClass:"p-20-0 border-b f34"},[e._v("退货地址")]),s("v-uni-view",{staticClass:"pt30 f28"},[s("v-uni-text",{staticClass:"gray9"},[e._v("收货人：")]),s("v-uni-text",[e._v(e._s(e.detail.address.name))])],1),s("v-uni-view",{staticClass:"pt30 f28"},[s("v-uni-text",{staticClass:"gray9"},[e._v("联系电话：")]),s("v-uni-text",[e._v(e._s(e.detail.address.phone))])],1),s("v-uni-view",{staticClass:"pt30 f28"},[s("v-uni-text",{staticClass:"gray9"},[e._v("详情地址：")]),s("v-uni-text",[e._v(e._s(e.detail.address.detail))])],1),e.detail.express_no?s("v-uni-view",{staticClass:"pt30 f28"},[s("v-uni-text",{staticClass:"gray9"},[e._v("物流公司：")]),s("v-uni-text",[e._v(e._s(e.detail.express.express_name))])],1):e._e(),e.detail.express_no?s("v-uni-view",{staticClass:"pt30 f28"},[s("v-uni-text",{staticClass:"gray9"},[e._v("物流单号：")]),s("v-uni-text",[e._v(e._s(e.detail.express_no))])],1):e._e(),e.detail.is_plate_send?s("v-uni-view",{staticClass:"pt30 f28"},[s("v-uni-text",{staticClass:"gray9"},[e._v("换货物流公司：")]),s("v-uni-text",[e._v(e._s(e.detail.sendexpress.express_name))])],1):e._e(),e.detail.is_plate_send?s("v-uni-view",{staticClass:"pt30 f28",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.gotoPage("/pages/order/express/refund-express?order_id="+e.detail.order_refund_id)}}},[s("v-uni-text",{staticClass:"gray9"},[e._v("换货物流单号：")]),s("v-uni-text",[e._v(e._s(e.detail.send_express_no))])],1):e._e(),s("v-uni-view",{staticClass:"mt20 pb20 border-t gray9"},[s("v-uni-view",{staticClass:"pt20"},[e._v("· 未与卖家协商一致情况下，请勿寄到付或平邮")]),s("v-uni-view",{staticClass:"pt10"},[e._v("· 请填写真实有效物流信息")])],1)],1):e._e(),0==e.detail.status.value&&10==e.detail.is_agree.value&&0==e.detail.is_user_send&&"user"==e.source?s("v-uni-form",{attrs:{"report-submit":!0},on:{submit:function(t){arguments[0]=t=e.$handleEvent(t),e.formSubmit.apply(void 0,arguments)}}},[s("v-uni-view",{staticClass:"group bg-white"},[s("v-uni-view",{staticClass:"p-20-0 border-b f34"},[e._v("填写物流信息")]),s("v-uni-view",{staticClass:"p-20-0 d-s-c"},[s("v-uni-view",{staticClass:"gray9"},[e._v("物流公司：")]),s("v-uni-view",{staticClass:"flex-1 p20 border"},[s("v-uni-picker",{attrs:{mode:"selector",range:e.expressList,"range-key":"express_name",value:e.index},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.onExpressChange.apply(void 0,arguments)}}},[e.index>-1?s("v-uni-text",[e._v(e._s(e.expressList[e.index].express_name))]):s("v-uni-text",{staticClass:"col-80"},[e._v("请选择物流公司")])],1)],1)],1),s("v-uni-view",{staticClass:"p-20-0 d-s-c"},[s("v-uni-view",{staticClass:"gray9"},[e._v("物流单号：")]),s("v-uni-view",{staticClass:"flex-1 border"},[s("v-uni-input",{staticClass:"p10",attrs:{placeholder:"请填写物流单号",name:"express_no"}})],1)],1),s("v-uni-view",{staticClass:"mt20"},[s("v-uni-button",{staticClass:"btn-red",attrs:{formType:"submit"}},[e._v("确认发货")])],1)],1)],1):e._e(),20==e.detail.type.value&&10==e.detail.is_agree.value&&1==e.detail.is_user_send&&"user"!=e.source&&0==e.detail.is_plate_send?s("v-uni-form",{attrs:{"report-submit":!0},on:{submit:function(t){arguments[0]=t=e.$handleEvent(t),e.reReceipt.apply(void 0,arguments)}}},[s("v-uni-view",{staticClass:"group bg-white"},[s("v-uni-view",{staticClass:"p-20-0 border-b f34"},[e._v("填写物流信息")]),s("v-uni-view",{staticClass:"p-20-0 d-s-c"},[s("v-uni-view",{staticClass:"gray9"},[e._v("物流公司：")]),s("v-uni-view",{staticClass:"flex-1 p20 border"},[s("v-uni-picker",{attrs:{mode:"selector",range:e.expressList,"range-key":"express_name",value:e.index},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.onExpressChange.apply(void 0,arguments)}}},[e.index>-1?s("v-uni-text",[e._v(e._s(e.expressList[e.index].express_name))]):s("v-uni-text",{staticClass:"col-80"},[e._v("请选择物流公司")])],1)],1)],1),s("v-uni-view",{staticClass:"p-20-0 d-s-c"},[s("v-uni-view",{staticClass:"gray9"},[e._v("物流单号：")]),s("v-uni-view",{staticClass:"flex-1 border"},[s("v-uni-input",{staticClass:"p10",attrs:{placeholder:"请填写物流单号",name:"send_express_no"}})],1)],1),s("v-uni-view",{staticClass:"mt20"},[s("v-uni-button",{staticClass:"btn-red",attrs:{formType:"submit"}},[e._v("确认发货")])],1)],1)],1):e._e(),0==e.detail.is_agree.value&&"supplier"==e.source?s("v-uni-view",{staticClass:"group bg-white f24"},[s("v-uni-view",{staticClass:"p-20-0 border-b f34"},[s("v-uni-view",{staticClass:"mb20"},[e._v("审核")]),s("v-uni-view",{},[s("v-uni-view",{staticClass:"f26 gray9"},[e._v("售后类型："),s("v-uni-text",{staticClass:"gray3"},[e._v(e._s(e.detail.type.text))])],1),s("v-uni-view",{staticClass:"d-s-c mb20"},[s("v-uni-view",{staticClass:"make-top w120 mr10"},[s("v-uni-view",{staticClass:"gray9 f26"},[e._v("审核状态")])],1),s("v-uni-radio-group",{staticClass:"d-a-c",on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.changeRadio(t)}}},[s("v-uni-label",{staticClass:"d-s-c make-item "},[s("v-uni-view",[s("v-uni-radio",{staticStyle:{transform:"scale(0.7)"},attrs:{color:"#ff6633",checked:10==e.is_agree,value:"10"}})],1),s("v-uni-view",{staticClass:"f26 color-57"},[e._v("同意")])],1),s("v-uni-label",{staticClass:"d-s-c make-item "},[s("v-uni-view",[s("v-uni-radio",{staticStyle:{transform:"scale(0.7)"},attrs:{color:"#ff6633",checked:20==e.is_agree,value:"20"}})],1),s("v-uni-view",{staticClass:"f26 color-57"},[e._v("拒绝")])],1)],1)],1),10==e.is_agree&&30!=e.detail.type.value?s("v-uni-view",{staticClass:"d-s-c mb20"},[s("v-uni-picker",{attrs:{mode:"selector",range:e.address,"range-key":"detail",value:e.addressIndex},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.onAddressChange.apply(void 0,arguments)}}},[""!=e.address_id?s("v-uni-text",[e._v(e._s(e.address[e.addressIndex].detail))]):s("v-uni-text",{staticClass:"col-80"},[e._v("请选择退货地址")])],1)],1):e._e(),20==e.is_agree?s("v-uni-view",{staticClass:"d-s-c mb20"},[s("v-uni-view",{staticClass:"w120 mr10 f26"},[e._v("拒绝原因")]),s("v-uni-input",{staticClass:"make-item selectpicker input-box",attrs:{type:"text"},model:{value:e.refuse_desc,callback:function(t){e.refuse_desc=t},expression:"refuse_desc"}})],1):e._e(),10==e.is_agree&&30==e.detail.type.value?s("v-uni-view",[s("v-uni-view",{staticClass:"d-s-c mb20"},[s("v-uni-view",{staticClass:"w120 mr10 f26"},[e._v("退款金额")]),s("v-uni-input",{staticClass:"make-item selectpicker input-box",attrs:{type:"text"},model:{value:e.refund_money,callback:function(t){e.refund_money=t},expression:"refund_money"}})],1),s("v-uni-view",{staticClass:"p-20-0 f28"},[s("v-uni-view",{staticClass:"red"},[e._v("请严格按照售后理赔标准进行赔付,避免买家对赔付有异议,请输入退款金额,最多"+e._s(e.detail.orderproduct.total_pay_price)+"元")]),s("v-uni-view",{staticClass:"gray9"},[e._v("注：该操作将执行订单原路退款，并关闭当前售后单，请确认并填写，退款的金额(不能大于订单实付款)")])],1)],1):e._e(),s("v-uni-view",{staticClass:"mt20"},[s("v-uni-button",{staticClass:"btn-red",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.sendRefund.apply(void 0,arguments)}}},[e._v("确认审核")])],1)],1)],1)],1):e._e(),10==e.detail.type.value&&10==e.detail.is_agree.value&&1==e.detail.is_user_send&&0==e.detail.is_receipt&&"supplier"==e.source?s("v-uni-view",{staticClass:"group bg-white f24"},[s("v-uni-view",{staticClass:"p-20-0 border-b f34"},[s("v-uni-view",{staticClass:"mb20"},[e._v("审核")]),s("v-uni-view",{},[s("v-uni-view",{staticClass:"f26 gray9"},[e._v("售后类型："),s("v-uni-text",{staticClass:"gray3"},[e._v(e._s(e.detail.type.text))])],1),s("v-uni-view",[s("v-uni-view",{staticClass:"d-s-c mb20"},[s("v-uni-view",{staticClass:"w120 mr10 f26"},[e._v("退款金额")]),s("v-uni-input",{staticClass:"make-item selectpicker input-box",attrs:{type:"text"},model:{value:e.refund_money,callback:function(t){e.refund_money=t},expression:"refund_money"}})],1),s("v-uni-view",{staticClass:"p-20-0 f28"},[s("v-uni-view",{staticClass:"red"},[e._v("请严格按照售后理赔标准进行赔付,避免买家对赔付有异议,请输入退款金额,最多"+e._s(e.detail.orderproduct.total_pay_price)+"元")]),s("v-uni-view",{staticClass:"gray9"},[e._v("注：该操作将执行订单原路退款，并关闭当前售后单，请确认并填写，退款的金额(不能大于订单实付款)")])],1)],1),s("v-uni-view",{staticClass:"mt20"},[s("v-uni-button",{staticClass:"btn-red",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.sendReceipt.apply(void 0,arguments)}}},[e._v("确认审核")])],1)],1)],1)],1):e._e()],1)},n=[]}}]);