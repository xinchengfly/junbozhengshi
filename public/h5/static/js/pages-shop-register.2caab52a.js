(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-shop-register","components-upload-upload"],{"1276a":function(t,i,e){"use strict";e.r(i);var a=e("41b3"),n=e.n(a);for(var o in a)"default"!==o&&function(t){e.d(i,t,(function(){return a[t]}))}(o);i["default"]=n.a},"41b3":function(t,i,e){"use strict";e("4160"),e("159b"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a={data:function(){return{imageList:[]}},props:["num"],onLoad:function(){},mounted:function(){this.chooseImageFunc()},methods:{chooseImageFunc:function(){var t=this;uni.chooseImage({count:t.num||9,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(i){t.uploadFile(i.tempFilePaths)},fail:function(i){t.$emit("getImgs",null)},complete:function(t){}})},uploadFile:function(t){var i=this,e=0,a=t.length,n={token:uni.getStorageSync("token"),app_id:i.getAppId()};uni.showLoading({title:"上传中"}),t.forEach((function(t,o){uni.uploadFile({url:i.websiteUrl+"/index.php?s=/api/file.upload/image",filePath:t,name:"iFile",formData:n,success:function(t){var e="object"===typeof t.data?t.data:JSON.parse(t.data);1===e.code&&i.imageList.push(e.data)},complete:function(){e++,a===e&&(uni.hideLoading(),i.$emit("getImgs",i.imageList))}})}))}}};i.default=a},7179:function(t,i,e){"use strict";var a=e("4ea4");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n,o=a(e("ade3")),s=a(e("ce74")),d=(n={components:{Upload:s.default},onShow:function(){this.getData()},data:function(){return{form:{image_frontid:0,business_id:0,mobile:"",password:""},isupload:!1,type:"frontid",image_frontid_path:"",business_id_path:"",bg_image:"",classify_data_name:"",classify_data_id:"",classify_data_name_active:"",classify_data_id_active:"",second:60,send_btn_txt:"获取验证码",is_send:!1,sms_open:0}}},(0,o.default)(n,"onShow",(function(){this.get_classify()})),(0,o.default)(n,"methods",{changeMsg:function(){this.second>0?(this.send_btn_txt=this.second+"秒",this.second--,setTimeout(this.changeMsg,1e3)):(this.send_btn_txt="获取验证码",this.second=60,this.is_send=!1)},getData:function(){var t=this;t._get("user.index/detail",{},(function(i){t.bg_image=i.data.setting.supplier_image}))},getCode:function(t){var i=this;i._post("supplier.apply/sendCode",{mobile:t},(function(t){i.is_send=!0,i.changeMsg()}))},get_classify:function(){var t=this;t._post("supplier.apply/category",{},(function(i){for(var e=[],a=[],n=0;n<i.data.list.length;n++)e.push(i.data.list[n].name);for(var o=0;o<i.data.list.length;o++)a.push(i.data.list[o].category_id);t.classify_data_name=e,t.classify_data_id=a,t.sms_open=i.data.sms_open}))},select:function(){var t=this;uni.showActionSheet({itemList:t.classify_data_name,success:function(i){t.classify_data_name_active=t.classify_data_name[i.tapIndex],t.classify_data_id_active=t.classify_data_id[i.tapIndex]},fail:function(t){}})},formSubmit:function(t){var i=this,e=t.detail.value;if(e.business_id=i.form.business_id,console.log(e),console.log(i.form),e.category_id=i.classify_data_id_active,""==i.classify_data_name_active)return uni.showToast({title:"请填主营类别",duration:1e3,icon:"none"}),!1;if(""==e.store_name)return uni.showToast({title:"请输入店铺名称",duration:1e3,icon:"none"}),!1;if(0==e.business_id)return uni.showToast({title:"请上传营业执照",duration:1e3,icon:"none"}),!1;if(""==e.user_name)return uni.showToast({title:"请输入真实姓名",duration:1e3,icon:"none"}),!1;if(""==e.mobile)return uni.showToast({title:"请输入手机号码",duration:1e3,icon:"none"}),!1;if(""==e.code&&1==i.sms_open)return uni.showToast({title:"请填写验证码",duration:1e3,icon:"none"}),!1;if(""==e.password)return uni.showToast({title:"请填写登录密码",duration:1e3,icon:"none"}),!1;var a=/^((0\d{2,3}-\d{7,8})|(1[3456789]\d{9}))$/;if(!a.test(e.mobile))return uni.showToast({title:"手机号码格式不正确",duration:1e3,icon:"none"}),!1;uni.showLoading({title:"正在提交",mask:!0}),i._post("supplier.apply/index",e,(function(t){i.showSuccess(t.msg,(function(){i.gotoPage("/pages/shop/application_status")}),null,(function(){uni.hideLoading()}))}))},openUpload:function(t){this.type=t,this.isupload=!0},getImgsFunc:function(t){console.log(t),null!=t&&t.length>0&&("frontid"==this.type?(console.log(t[0].file_id),this.image_frontid_path=t[0].file_path,this.form.image_frontid=t[0].file_id):"license"==this.type&&(console.log(t[0].file_id),this.business_id_path=t[0].file_path,this.form.business_id=t[0].file_id)),this.isupload=!1},changeSelect:function(t){this.classify_data_id_active=this.classify_data_id[t.detail.value],this.classify_data_name_active=this.classify_data_name[t.detail.value]}}),n);i.default=d},"834a":function(t,i,e){var a=e("24fb");i=a(!1),i.push([t.i,"uni-page-body[data-v-1bd7b654]{background:#ff3d19}.bg_image uni-image[data-v-1bd7b654]{width:100%;height:%?1200?%}.iconfont[data-v-1bd7b654]{font-size:%?48?%}.index[data-v-1bd7b654]{width:%?750?%}.certification[data-v-1bd7b654]{width:%?675?%;margin:0 auto;border-radius:%?30?%;padding:%?30?%;box-sizing:border-box;background-color:#fff;position:absolute;top:%?260?%;left:%?37.5?%;margin-bottom:%?50?%}.certification_head[data-v-1bd7b654]{width:100%}.certification_head_body[data-v-1bd7b654]{width:100%}.certification_head_body_item[data-v-1bd7b654]{width:100%;height:%?100?%;display:flex;align-items:center;font-size:%?32?%!important}.certification_head_body_item uni-view[data-v-1bd7b654]{margin-right:%?10?%}.certification_head_body_item uni-button[data-v-1bd7b654]{width:%?172?%;height:%?56?%;line-height:%?56?%;border:%?1?% #e2231a solid;border-radius:%?40?%;font-size:%?26?%;color:#e2231a;padding:0 %?20?%}.login_index_updata_name[data-v-1bd7b654]{margin-top:%?28?%;margin-left:%?48?%}.login_index_updata_updata[data-v-1bd7b654]{width:90%;height:%?360?%;margin:0 auto;margin-top:%?35?%}.login_index_updata_updata_item2[data-v-1bd7b654]{width:100%;height:%?360?%;border:%?1?% #9a9a9a dotted;border-radius:%?15?%;text-align:center}.login_index_updata_updata_item_body[data-v-1bd7b654]{width:%?150?%;height:%?360?%;text-align:center;margin:0 auto;display:flex;justify-content:center;align-items:center}.img uni-image[data-v-1bd7b654]{width:%?554?%;height:%?360?%;position:relative}.login_index_btn[data-v-1bd7b654]{position:relative;top:%?30?%;margin-bottom:%?30?%}.login_index_btn uni-button[data-v-1bd7b654]{width:90%;height:%?80?%;background-color:#f36a24;border-radius:%?50?%;line-height:%?80?%;margin:0 auto;color:#fff;font-size:%?30?%}.certification_rule[data-v-1bd7b654]{position:relative;left:%?500?%;top:%?-10?%}.certification_rule uni-text[data-v-1bd7b654]{color:#8a8a8a}.certification_rule uni-image[data-v-1bd7b654]{width:%?24?%;height:%?24?%;display:inline-block}.classify_text[data-v-1bd7b654]{color:grey;margin-left:%?40?%}.select uni-input[data-v-1bd7b654]{padding-left:%?60?%;color:grey}.make-item[data-v-1bd7b654]{padding-left:%?60?%}body.?%PAGE?%[data-v-1bd7b654]{background:#ff3d19}",""]),t.exports=i},"9c36":function(t,i,e){"use strict";e.r(i);var a=e("7179"),n=e.n(a);for(var o in a)"default"!==o&&function(t){e.d(i,t,(function(){return a[t]}))}(o);i["default"]=n.a},a51f:function(t,i,e){"use strict";var a;e.d(i,"b",(function(){return n})),e.d(i,"c",(function(){return o})),e.d(i,"a",(function(){return a}));var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"index"},[e("v-uni-view",{staticClass:"bg_image"},[e("v-uni-image",{attrs:{src:"http://wx-cdn.jiujiuyunhui.com/202011091623282f83a8213.png"}})],1),e("v-uni-view",{staticClass:"certification"},[e("v-uni-form",{on:{submit:function(i){arguments[0]=i=t.$handleEvent(i),t.formSubmit.apply(void 0,arguments)},reset:function(i){arguments[0]=i=t.$handleEvent(i),t.formReset.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"certification_head"},[e("v-uni-view",{staticClass:"certification_head_body"},[e("v-uni-view",{staticClass:"certification_head_body_item"},[e("v-uni-view",{staticClass:"icon iconfont icon-qiye"}),e("v-uni-input",{attrs:{type:"text",name:"store_name",placeholder:"请输入店铺名称"},model:{value:t.form.store_name,callback:function(i){t.$set(t.form,"store_name",i)},expression:"form.store_name"}})],1),e("v-uni-view",{staticClass:"certification_head_body_item"},[e("v-uni-view",{staticClass:"icon iconfont icon-ziyuan1"}),e("v-uni-input",{attrs:{type:"text",name:"user_name",placeholder:"请输入真实姓名"},model:{value:t.form.user_name,callback:function(i){t.$set(t.form,"user_name",i)},expression:"form.user_name"}})],1),e("v-uni-view",{staticClass:"certification_head_body_item"},[e("v-uni-view",{staticClass:"icon iconfont icon-phone"}),e("v-uni-input",{attrs:{type:"text",name:"mobile",placeholder:"请输入手机号码"},model:{value:t.form.mobile,callback:function(i){t.$set(t.form,"mobile",i)},expression:"form.mobile"}}),1==t.sms_open?e("v-uni-button",{attrs:{type:"default",disabled:t.is_send},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.getCode(t.form.mobile)}}},[t._v(t._s(t.send_btn_txt))]):t._e()],1),e("v-uni-view",{staticClass:"certification_head_body_item"},[e("v-uni-view",{staticClass:"icon iconfont icon-mima"}),e("v-uni-input",{attrs:{type:"text",name:"password",password:"true",placeholder:"请输入登录密码"},model:{value:t.form.password,callback:function(i){t.$set(t.form,"password",i)},expression:"form.password"}})],1),1==t.sms_open?e("v-uni-view",{staticClass:"certification_head_body_item"},[e("v-uni-view",{staticClass:"icon iconfont icon-yanzhengma"}),e("v-uni-input",{attrs:{type:"text",name:"code",placeholder:"请输入验证码"},model:{value:t.form.code,callback:function(i){t.$set(t.form,"code",i)},expression:"form.code"}})],1):t._e(),e("v-uni-picker",{attrs:{value:"",range:t.classify_data_name},on:{change:function(i){arguments[0]=i=t.$handleEvent(i),t.changeSelect(i)}}},[e("v-uni-view",{staticClass:"certification_head_body_item d-b-c"},[t.classify_data_name_active?e("v-uni-view",{staticClass:"make-item input-box flex-1"},[t._v(t._s(t.classify_data_name_active))]):e("v-uni-view",{staticClass:"make-item input-box flex-1",staticStyle:{color:"#777777"}},[t._v("请选择您店铺的主营项目")]),e("v-uni-view",{staticClass:"icon iconfont icon-jiantou",staticStyle:{"font-size":"24rpx"}})],1)],1)],1)],1),e("v-uni-view",{staticClass:"certification_body"},[e("v-uni-view",{staticClass:"login_index_updata_name"},[e("v-uni-text",{staticStyle:{color:"red"}},[t._v("*")]),e("v-uni-text",{staticStyle:{"font-size":"32rpx","font-weight":"500",color:"#000000"}},[t._v("请上传营业执照")])],1),e("v-uni-view",{staticClass:"login_index_updata_updata"},[e("v-uni-view",{staticClass:"login_index_updata_updata_item2",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.openUpload("license")}}},[e("v-uni-view",{staticClass:"login_index_updata_updata_item_body"},[""!=t.business_id_path?e("v-uni-view",{staticClass:"img"},[e("v-uni-image",{attrs:{src:t.business_id_path}})],1):t._e(),""==t.business_id_path?e("v-uni-view",[t._v("点击上传营业执照")]):t._e(),e("v-uni-input",{staticStyle:{display:"none"},attrs:{name:"business_id"},model:{value:t.form.business_id,callback:function(i){t.$set(t.form,"business_id",i)},expression:"form.business_id"}})],1)],1)],1)],1),e("v-uni-view",{staticClass:"login_index_btn"},[e("v-uni-button",{attrs:{"form-type":"submit",type:"default"}},[t._v("确定")])],1),t.isupload?e("Upload",{attrs:{isupload:t.isupload,type:t.type},on:{getImgs:function(i){arguments[0]=i=t.$handleEvent(i),t.getImgsFunc.apply(void 0,arguments)}}},[t._v("上传图片")]):t._e()],1)],1)],1)},o=[]},ab5d:function(t,i,e){var a=e("834a");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=e("4f06").default;n("29c68d00",a,!0,{sourceMap:!1,shadowMode:!1})},ce74:function(t,i,e){"use strict";e.r(i);var a=e("d2e3"),n=e("1276a");for(var o in n)"default"!==o&&function(t){e.d(i,t,(function(){return n[t]}))}(o);var s,d=e("f0c5"),c=Object(d["a"])(n["default"],a["b"],a["c"],!1,null,"55ec37e4",null,!1,a["a"],s);i["default"]=c.exports},d2e3:function(t,i,e){"use strict";var a;e.d(i,"b",(function(){return n})),e.d(i,"c",(function(){return o})),e.d(i,"a",(function(){return a}));var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view")},o=[]},f26c:function(t,i,e){"use strict";var a=e("ab5d"),n=e.n(a);n.a},f575:function(t,i,e){"use strict";e.r(i);var a=e("a51f"),n=e("9c36");for(var o in n)"default"!==o&&function(t){e.d(i,t,(function(){return n[t]}))}(o);e("f26c");var s,d=e("f0c5"),c=Object(d["a"])(n["default"],a["b"],a["c"],!1,null,"1bd7b654",null,!1,a["a"],s);i["default"]=c.exports}}]);