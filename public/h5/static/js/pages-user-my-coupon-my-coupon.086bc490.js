(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-my-coupon-my-coupon"],{"3c0c":function(t,e,i){"use strict";var n=i("5bba"),a=i.n(n);a.a},"5bba":function(t,e,i){var n=i("c064");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("5996110e",n,!0,{sourceMap:!1,shadowMode:!1})},"62c0":function(t,e,i){"use strict";var n;i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-view",{staticClass:"top-tabbar"},[i("v-uni-view",{class:0==t.state_active?"tab-item active":"tab-item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.stateFunc(0)}}},[t._v("未使用")]),i("v-uni-view",{class:1==t.state_active?"tab-item active":"tab-item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.stateFunc(1)}}},[t._v("已使用")]),i("v-uni-view",{class:2==t.state_active?"tab-item active":"tab-item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.stateFunc(2)}}},[t._v("已过期")])],1),i("v-uni-scroll-view",{staticClass:"scroll-Y",style:"height:"+t.scrollviewHigh+"px;",attrs:{"scroll-y":"true","lower-threshold":"50"},on:{scrolltoupper:function(e){arguments[0]=e=t.$handleEvent(e),t.scrolltoupperFunc.apply(void 0,arguments)},scrolltolower:function(e){arguments[0]=e=t.$handleEvent(e),t.scrolltolowerFunc.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"p30 bg-white"},t._l(t.supList,(function(e,n){return e.list.length>0?i("v-uni-view",{key:n,staticClass:"item-wrap mb20"},[i("v-uni-view",{staticClass:"d-f"},[i("span",{staticClass:"icon iconfont icon-dianpu1"}),i("v-uni-view",{staticClass:"con_tit"},[t._v(t._s(e.name))])],1),t._l(e.list,(function(n,a){return e.list.length>0?i("v-uni-view",{key:a,staticClass:"coupon_item"},[i("v-uni-view",{class:0==n.is_expire&&0==n.is_use?"coupon-item coupon-item-"+n.color.text:"coupon-item coupon-item-gray",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.lookRule(n)}}},[i("v-uni-view",{staticClass:"coupon_type"},[t._v(t._s("平台优惠券"==e.name?"平台通用":e.name))]),i("v-uni-view",{staticClass:"circles"},t._l(8,(function(t,e){return i("v-uni-text",{key:e})})),1),i("v-uni-view",{staticClass:"info"},[i("v-uni-view",[t._v(t._s(n.coupon_type.text))])],1),i("v-uni-view",{staticClass:"operation d-b-c"},[i("v-uni-view",{staticClass:"flex-1 coupon-content"},[i("v-uni-view",[10==n.coupon_type.value?[i("v-uni-view",{staticClass:"price"},[i("v-uni-text",[t._v("￥")]),i("v-uni-text",{staticClass:"f40 fb"},[t._v(t._s(n.reduce_price))])],1)]:t._e(),20==n.coupon_type.value?[i("v-uni-text",{staticClass:"f40 fb"},[t._v(t._s(n.discount))]),i("v-uni-text",[t._v("折")])]:t._e()],2),i("v-uni-view",{staticClass:"f30"},[t._v(t._s(n.name))]),i("v-uni-view",{staticClass:"f24"},[10==n.expire_type?[t._v("有效期：剩余"+t._s(n.expire_day)+"天")]:t._e(),20==n.expire_type?[t._v("有效期："+t._s(n.start_time.text)+"至"+t._s(n.end_time.text))]:t._e()],2)],1),i("v-uni-view",{staticClass:"right-box d-c-c"},[n.state.value>0?[10!=n.apply_range?i("v-uni-view",{staticClass:"f30",attrs:{type:"default"},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.gotoPage("/pages/coupon/detail?coupon_id="+n.coupon_id+"&apply_range="+n.apply_range)}}},[t._v("立即使用")]):i("v-uni-view",{staticClass:"f30",attrs:{type:"default"},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.gotoPage("/pages/index/index")}}},[t._v("立即使用")])]:i("v-uni-view",{staticClass:"f30"},[i("v-uni-text",[t._v(t._s(n.state.text))])],1)],2)],1)],1),20==n.apply_range?i("v-uni-view",{staticClass:"range_item d-b-c",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.gotoPage("/pages/coupon/detail?coupon_id="+n.coupon_id+"&apply_range="+n.apply_range)}}},[i("v-uni-view",[t._v("仅可购买指定部分商品")]),i("v-uni-view",[i("v-uni-text",{staticClass:"icon iconfont icon-jiantou",staticStyle:{color:"#999999","font-size":"24rpx"}})],1)],1):t._e(),30==n.apply_range?i("v-uni-view",{staticClass:"range_item d-b-c",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.gotoPage("/pages/coupon/detail?coupon_id="+n.coupon_id+"&apply_range="+n.apply_range)}}},[i("v-uni-view",[t._v("仅可购买指定分类商品")]),i("v-uni-view",[i("v-uni-text",{staticClass:"icon iconfont icon-jiantou",staticStyle:{color:"#999999","font-size":"24rpx"}})],1)],1):t._e()],1):t._e()})),i("v-uni-view",{},[i("v-uni-view",{staticClass:"bottom-refresh"},[t.loading?i("v-uni-view",{staticClass:"d-c-c p30"},[i("v-uni-text",{staticClass:"gray3"},[t._v("加载中...")])],1):t._e(),t.no_more?i("v-uni-view",{staticClass:"d-c-c p30"},[i("v-uni-text",{staticClass:"gray3"},[t._v("~~加载完成~~")])],1):t._e()],1)],1),0!=t.DataList.length||t.loading?t._e():i("v-uni-view",{staticClass:"d-c-c p30"},[i("v-uni-text",{staticClass:"iconfont icon-wushuju"}),i("v-uni-text",{staticClass:"cont"},[t._v("亲，暂无相关记录哦")])],1)],2):t._e()})),1)],1)],1)},o=[]},"999d":function(t,e,i){"use strict";i.r(e);var n=i("ff97"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},adb5:function(t,e,i){"use strict";i.r(e);var n=i("62c0"),a=i("999d");for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("3c0c");var s,c=i("f0c5"),u=Object(c["a"])(a["default"],n["b"],n["c"],!1,null,"4c55ecfe",null,!1,n["a"],s);e["default"]=u.exports},c064:function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,".d-f[data-v-4c55ecfe]{display:flex;align-items:center}.icon-dianpu1[data-v-4c55ecfe]{margin-right:%?15?%}.coupon_type[data-v-4c55ecfe]{padding:%?10?% %?20?%;position:absolute;z-index:100;color:#fff;right:0;top:0;background:hsla(0,0%,79.2%,.5);height:%?36?%;border-bottom-left-radius:%?18?%}.con_tit[data-v-4c55ecfe]{font-weight:800;font-size:%?31?%}.coupon_item[data-v-4c55ecfe]{margin:%?20?% 0}.range_item[data-v-4c55ecfe]{border:%?1?% solid #d9d9d9;border-top:none;padding:%?8?%;border-bottom-left-radius:%?10?%;border-bottom-right-radius:%?10?%;color:#666;box-shadow:0 0 %?8?% rgba(0,0,0,.1)}",""]),t.exports=e},ff97:function(t,e,i){"use strict";i("4160"),i("ac1f"),i("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){return{phoneHeight:0,scrollviewHigh:0,state_active:0,DataList:{},no_more:!1,loading:!1,data_type:"not_use",supList:[]}},mounted:function(){this.init(),this.getData()},methods:{init:function(){var t=this;uni.getSystemInfo({success:function(e){t.phoneHeight=e.windowHeight;var i=uni.createSelectorQuery().select(".top-tabbar");i.boundingClientRect((function(e){var i=t.phoneHeight-e.height;t.scrollviewHigh=i})).exec()}})},getData:function(){var t=this;uni.showLoading({title:"加载中"});var e=t.data_type;t._get("user.coupon/lists",{data_type:e},(function(e){uni.hideLoading(),t.DataList=e.data.list,t.getSup()}))},getSup:function(){var t=this,e=[],i={name:"平台优惠券",list:[]};t.DataList.forEach((function(t,n){if(console.log(n),null==t.supplier)i.list.push(t);else if(""==e)e.push({name:t.supplier.name,list:[t]});else{var a=!0;e.forEach((function(e,i){e.name===t.supplier.name&&(a=!1,e.list.push(t))})),a&&e.push({name:t.supplier.name,list:[t]})}})),console.log(e),e.push(i),t.supList=e},stateFunc:function(t){var e=this;e.state_active!=t&&(0==t&&(e.data_type="not_use"),1==t&&(e.data_type="is_use"),2==t&&(e.data_type="is_expire"),e.state_active=t,e.getData())},scrolltoupperFunc:function(){console.log("滚动视图区域到顶")},scrolltolowerFunc:function(){console.log("滚动视图区域到底")},lookRule:function(t){t.rule=!0},closeRule:function(t){t.rule=!1}}};e.default=n}}]);