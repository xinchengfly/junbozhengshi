(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-coupon-detail"],{1538:function(t,i,a){"use strict";var e;a.d(i,"b",(function(){return n})),a.d(i,"c",(function(){return o})),a.d(i,"a",(function(){return e}));var n=function(){var t=this,i=t.$createElement,a=t._self._c||i;return t.loading?t._e():a("v-uni-view",{staticClass:"coupon_bg"},[a("v-uni-view",{staticClass:"coupon-detail-top"},[a("v-uni-view",{staticClass:"top_box"},[a("v-uni-view",[a("v-uni-text",{staticClass:"icon iconfont icon-dianpu1",staticStyle:{color:"#333333","font-size":"30rpx"}}),a("v-uni-text",{staticClass:"gray3 fb f30 ml10"},[t._v(t._s(t.detail.supplier?t.detail.supplier.name:"平台通用"))])],1),a("v-uni-view",{staticClass:"item-wrap"},[a("v-uni-view",{class:"coupon-item coupon-item-"+t.detail.color.text},[a("v-uni-view",{staticClass:"circles"},t._l(8,(function(t,i){return a("v-uni-text",{key:i})})),1),a("v-uni-view",{staticClass:"info"},[a("v-uni-view",[t._v(t._s(t.detail.coupon_type.text))])],1),a("v-uni-view",{staticClass:"operation d-b-c w-b"},[a("v-uni-view",{staticClass:"flex-1 coupon-content"},[a("v-uni-view",[10==t.detail.coupon_type.value?[a("v-uni-view",{staticClass:"price"},[a("v-uni-text",[t._v("￥")]),a("v-uni-text",{staticClass:"f40 fb"},[t._v(t._s(t.detail.reduce_price))])],1)]:t._e(),20==t.detail.coupon_type.value?[a("v-uni-text",{staticClass:"f40 fb"},[t._v(t._s(t.detail.discount))]),a("v-uni-text",[t._v("折")])]:t._e()],2),a("v-uni-view",{staticClass:"f30"},[t._v(t._s(t.detail.name))]),a("v-uni-view",{staticClass:"f24"},[20==t.detail.expire_type?[t._v("有效期："+t._s(t.detail.start_time.text)+" 至 "+t._s(t.detail.end_time.text))]:t._e(),10==t.detail.expire_type?[t._v("有效期：领取后"+t._s(t.detail.expire_day)+"天有效")]:t._e()],2)],1),a("v-uni-view",{staticClass:"btns d-c-c",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.receiveCoupon()}}},[1==t.detail.state.value?a("v-uni-button",{class:"btn-red",attrs:{type:"default"}},[t._v("立即领取")]):a("v-uni-button",{staticClass:"btn-gray",attrs:{type:"default"},on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i)}}},[t._v(t._s(t.detail.state.text))])],1)],1)],1)],1)],1),a("v-uni-view",{staticClass:"redF6 f26 fb pt30 d-c-c"},[a("v-uni-image",{staticClass:"decorate",attrs:{src:"/static/icon/coupons_arrow.png",mode:""}}),a("v-uni-text",{staticClass:"ml10 mr10"},[t._v("指定以下商品使用")]),a("v-uni-image",{staticClass:"decorate",attrs:{src:"/static/icon/coupons_arrow.png",mode:""}})],1),10!=t.apply_range?a("v-uni-view",{staticClass:"o-h pro_list"},[a("v-uni-view",{staticClass:"d-b-c f-w"},t._l(t.listData,(function(i,e){return a("v-uni-view",{key:e,staticClass:"pro_item",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.gotoPage("/pages/product/detail/detail?product_id="+i.product_id)}}},[a("v-uni-view",{staticClass:"pro_item_image"},[a("v-uni-image",{attrs:{src:i.product_image||"/static/default.png",mode:"aspectFill"}})],1),a("v-uni-view",{staticClass:"f26 gray3 text-ellipsis mt20 mb23 tc"},[t._v(t._s(i.product_name))]),a("v-uni-view",{staticClass:"fb redF6 tc"},[a("v-uni-text",{staticClass:"f22"},[t._v("￥")]),a("v-uni-text",{staticClass:"f32"},[t._v(t._s(i.product_price))])],1),a("v-uni-view",{staticClass:"d-c-c"},[a("v-uni-button",{staticClass:"add_btn"},[t._v("加入购物车")])],1)],1)})),1),0!=t.listData.length||t.loading?a("uni-load-more",{attrs:{loadingType:t.loadingType}}):a("v-uni-view",{staticClass:"d-c-c p30 ww100"},[a("v-uni-text",{staticClass:"iconfont icon-wushuju"}),a("v-uni-text",{staticClass:"cont"},[t._v("亲，暂无相关记录哦")])],1)],1):t._e()],1)],1)},o=[]},"21fe":function(t,i,a){"use strict";a.r(i);var e=a("1538"),n=a("8165");for(var o in n)"default"!==o&&function(t){a.d(i,t,(function(){return n[t]}))}(o);a("e6c9");var s,c=a("f0c5"),d=Object(c["a"])(n["default"],e["b"],e["c"],!1,null,"259c1497",null,!1,e["a"],s);i["default"]=d.exports},2995:function(t,i,a){"use strict";a("99af"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e={data:function(){return{loading:!0,statusBarHeight:0,titleBarHeight:0,titleHeight:0,opacity:0,coupon_id:0,listData:[],detail:{}}},onPageScroll:function(t){t.scrollTop<100?this.opacity=t.scrollTop/100:this.opacity=1},onLoad:function(t){this.coupon_id=t.coupon_id,this.apply_range=t.apply_range,this.GetStatusBarHeight()},onShow:function(){this.page=1,this.listData=[],this.getData()},methods:{GetStatusBarHeight:function(){var t=uni.getSystemInfoSync();this.statusBarHeight=t.statusBarHeight,this.titleHeight=this.statusBarHeight},getData:function(){var t=this;t.loading=!0,uni.showLoading({title:"加载中"});t.data_type;t._get("coupon.coupon/detail",{coupon_id:t.coupon_id},(function(i){uni.hideLoading(),t.loading=!1,t.detail=i.data.model,20==t.apply_range?t.listData=i.data.model.product:30==t.apply_range&&(t.listData=t.listData.concat(i.data.product_list.data),t.last_page=i.data.product_list.last_page,i.data.product_list.last_page<=1&&(t.no_more=!0))}))},receiveCoupon:function(){var t=this;if(0==t.detail.state.value)return!1;t._post("user.coupon/receive",{coupon_id:t.detail.coupon_id},(function(i){uni.showToast({title:"领取成功",icon:"success",mask:!0,duration:2e3}),t.detail.state.value=0,t.detail.state.text="已领取"}))},goback:function(){uni.navigateBack()}}};i.default=e},"40cd":function(t,i,a){var e=a("9514");"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var n=a("4f06").default;n("0f735107",e,!0,{sourceMap:!1,shadowMode:!1})},8165:function(t,i,a){"use strict";a.r(i);var e=a("2995"),n=a.n(e);for(var o in e)"default"!==o&&function(t){a.d(i,t,(function(){return e[t]}))}(o);i["default"]=n.a},9514:function(t,i,a){var e=a("24fb");i=e(!1),i.push([t.i,".coupon_bg[data-v-259c1497]{background:linear-gradient(0deg,#fffdd7,#fee6df)}.titleBar[data-v-259c1497]{position:fixed;width:100%;top:0;z-index:100}.top_bg[data-v-259c1497]{width:%?750?%;position:absolute;background:linear-gradient(41deg,#fff4f1 13%,#fdfff7 48%,#f6fffb 75%,#fff2ee);z-index:99;top:0}.top_box[data-v-259c1497]{background:rgba(0,0,0,.05);padding:%?28?% %?30?% %?30?% %?30?%;border-radius:%?20?%;margin-top:%?10?%;margin-bottom:%?5?%}.coupon-wrap[data-v-259c1497]{padding:%?30?%}.item-wrap[data-v-259c1497]{padding:%?20?% 0}.coupon-item .btns uni-button[data-v-259c1497]{border:none}.coupon-item .circles uni-text[data-v-259c1497]{display:block;width:%?10?%;height:%?20?%;background:linear-gradient(0deg,#fffdd7,#fee6df);border-radius:0 %?10?% %?10?% 0}.coupon-item .info[data-v-259c1497]::before,\n.coupon-item .info[data-v-259c1497]::after{background:linear-gradient(0deg,#fffdd7,#fee6df)}.decorate[data-v-259c1497]{width:%?16?%;height:%?16?%}.add_btn[data-v-259c1497]{width:%?181?%;height:%?40?%;background:#f6220c;border-radius:%?20?%;font-size:%?24?%;font-family:PingFang SC;font-weight:500;color:#fff;padding:0;border:none;display:flex;justify-content:center;align-items:center;margin-bottom:%?22?%}.add_btn .icon-jia[data-v-259c1497]{color:#fff;font-size:%?18?%}.pro_list[data-v-259c1497]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;padding:0 %?30?%;padding-bottom:%?80?%}.pro_item[data-v-259c1497]{width:%?335?%;border-radius:%?12?%;overflow:hidden;background-color:#fff;margin-top:%?20?%}.pro_item_image>uni-image[data-v-259c1497]{width:%?335?%;height:%?270?%}.head_top[data-v-259c1497]{position:relative;line-height:30px;color:#fff;font-size:%?32?%}.reg180[data-v-259c1497]{padding-right:%?20?%;text-align:right;-webkit-transform:rotateY(180deg);transform:rotateY(180deg);position:absolute;bottom:0;height:100%;display:flex;align-items:center;left:0}.icon-jiantou[data-v-259c1497]{color:#333;font-size:%?32?%}",""]),t.exports=i},e6c9:function(t,i,a){"use strict";var e=a("40cd"),n=a.n(e);n.a}}]);